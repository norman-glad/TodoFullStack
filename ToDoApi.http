
# @baseUrl = https://todoapi-norm-d4ere5eda0hje8e6.canadacentral-01.azurewebsites.net
@baseUrl = http://localhost:5058

@contentType = application/json

@token = eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJ0ZXN0dXNlckBleGFtcGxlLmNvbSIsImp0aSI6IjYyNmJiYzk4LTg0YWYtNGU2Mi1iNDc2LTE1MWRhZDkzMDA2YiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiNGE0ZWFiMGItYTM4NC00YjIxLTk1OTQtNTUwZGUxM2ZiOWQ0IiwiZXhwIjoxNzY2MTI0NDEzLCJpc3MiOiJUb0RvQXBpIiwiYXVkIjoiVG9Eb0NsaWVudCJ9.dY4z5fal26vcTG7zTVMOvdaePpYmlzchTwVNNT3Kkfs","userId":"4a4eab0b-a384-4b21-9594-550de13fb9d4","email":"testuser@example.com
@taskId = YOUR_TASK_ID_HERE

###############################################################################
# CORS PREFLIGHT TEST
###############################################################################

OPTIONS {{baseUrl}}/api/tasks
Origin: http://localhost:3000
Access-Control-Request-Method: POST
Access-Control-Request-Headers: Content-Type, Authorization

###############################################################################
# AUTHENTICATION
###############################################################################

### Register a new user
POST {{baseUrl}}/api/auth/register
Content-Type: {{contentType}}

{
    "email": "testuser@example.com",
    "password": "Test123!",
    "userName": "testuser"
}

### Login 
POST {{baseUrl}}/api/auth/login
Content-Type: {{contentType}}

{
    "email": "testuser@example.com",
    "password": "Test123!"
}

###############################################################################
# TASKS - CRUD OPERATIONS
###############################################################################

### Get all tasks
GET {{baseUrl}}/api/tasks
Content-Type: {{contentType}}
Authorization: Bearer {{token}}

### Get tasks with pagination
GET {{baseUrl}}/api/tasks?page=1&pageSize=5
Content-Type: {{contentType}}
Authorization: Bearer {{token}}

### Get tasks - Filter incomplete only
GET {{baseUrl}}/api/tasks?completed=false
Content-Type: {{contentType}}
Authorization: Bearer {{token}}

### Get tasks - Search by keyword
GET {{baseUrl}}/api/tasks?search=groceries
Content-Type: {{contentType}}
Authorization: Bearer {{token}}

### Create a task
POST {{baseUrl}}/api/tasks
Content-Type: {{contentType}}
Authorization: Bearer {{token}}

{
    "title": "Buy groceries",
    "description": "Milk, eggs, bread, butter",
    "dueDate": "2025-12-25T10:00:00Z",
    "priority": 2
}

### Create a task - Minimal (title only)
POST {{baseUrl}}/api/tasks
Content-Type: {{contentType}}
Authorization: Bearer {{token}}

{
    "title": "Quick task"
}

### Get single task by ID (update @taskId first)
GET {{baseUrl}}/api/tasks/{{taskId}}
Content-Type: {{contentType}}
Authorization: Bearer {{token}}

### Update task - Mark as completed
PUT {{baseUrl}}/api/tasks/{{taskId}}
Content-Type: {{contentType}}
Authorization: Bearer {{token}}

{
    "isCompleted": true
}

### Update task - Change title and priority
PUT {{baseUrl}}/api/tasks/{{taskId}}
Content-Type: {{contentType}}
Authorization: Bearer {{token}}

{
    "title": "Updated: Buy groceries and snacks",
    "priority": 1
}

### Delete task
DELETE {{baseUrl}}/api/tasks/{{taskId}}
Authorization: Bearer {{token}}

###############################################################################
# SWAGGER
###############################################################################

### Get Swagger JSON
GET {{baseUrl}}/swagger/v1/swagger.json
Accept: application/json

### Test 31: Delete task - Without auth (should return 401)
DELETE {{baseUrl}}/api/tasks/{{taskId}}

###############################################################################
# SWAGGER ENDPOINT
###############################################################################

### Test 32: Access Swagger JSON
GET {{baseUrl}}/swagger/v1/swagger.json
Accept: application/json

###
